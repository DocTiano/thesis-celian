<!-- Export Data Modal -->
<div class="modal fade" id="exportDataModal" tabindex="-1" aria-labelledby="exportDataModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exportDataModalLabel">
                    <i class="bi bi-download me-2"></i>Export My Data
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p class="text-muted">Export your personal and business data from the S2EH platform. You can choose which data to include in your export.</p>
                
                <form id="exportDataForm">
                    <div class="mb-3">
                        <label class="form-label">Select Data to Export:</label>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="exportProfile" checked>
                            <label class="form-check-label" for="exportProfile">
                                <strong>Profile Information</strong>
                                <div class="text-muted small">Personal details, contact information, business info</div>
                            </label>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="exportProducts" checked>
                            <label class="form-check-label" for="exportProducts">
                                <strong>Products & Listings</strong>
                                <div class="text-muted small">All your product listings, descriptions, prices, images</div>
                            </label>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="exportOrders" checked>
                            <label class="form-check-label" for="exportOrders">
                                <strong>Order History</strong>
                                <div class="text-muted small">All orders, transactions, customer interactions</div>
                            </label>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="exportMessages">
                            <label class="form-check-label" for="exportMessages">
                                <strong>Messages & Communications</strong>
                                <div class="text-muted small">Customer messages, platform notifications</div>
                            </label>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="exportAnalytics">
                            <label class="form-check-label" for="exportAnalytics">
                                <strong>Analytics & Reports</strong>
                                <div class="text-muted small">Sales data, performance metrics, insights</div>
                            </label>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="exportReviews">
                            <label class="form-check-label" for="exportReviews">
                                <strong>Reviews & Ratings</strong>
                                <div class="text-muted small">Customer reviews, ratings, feedback</div>
                            </label>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="exportFormat" class="form-label">Export Format:</label>
                        <select class="form-select" id="exportFormat">
                            <option value="json">JSON (Machine readable)</option>
                            <option value="csv">CSV (Spreadsheet compatible)</option>
                            <option value="pdf">PDF (Human readable)</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="exportDateRange" class="form-label">Date Range:</label>
                        <select class="form-select" id="exportDateRange">
                            <option value="all">All time</option>
                            <option value="year">Last 12 months</option>
                            <option value="6months">Last 6 months</option>
                            <option value="3months">Last 3 months</option>
                            <option value="month">Last month</option>
                            <option value="custom">Custom range</option>
                        </select>
                    </div>
                    
                    <div class="mb-3 d-none" id="customDateRange">
                        <div class="row">
                            <div class="col-6">
                                <label for="exportStartDate" class="form-label">Start Date:</label>
                                <input type="date" class="form-control" id="exportStartDate">
                            </div>
                            <div class="col-6">
                                <label for="exportEndDate" class="form-label">End Date:</label>
                                <input type="date" class="form-control" id="exportEndDate">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="emailExport" checked>
                        <label class="form-check-label" for="emailExport">
                            Send download link to my email
                        </label>
                    </div>
                </form>
                
                <div class="alert alert-info mt-3">
                    <i class="bi bi-info-circle me-2"></i>
                    <strong>Data Export Information:</strong>
                    <ul class="mb-0 mt-2">
                        <li>Large exports may take several minutes to process</li>
                        <li>You'll receive an email when your export is ready</li>
                        <li>Download links expire after 7 days</li>
                        <li>Personal data is handled according to our Privacy Policy</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="startExportBtn">
                    <i class="bi bi-download me-1"></i>Start Export
                </button>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const dateRangeSelect = document.getElementById('exportDateRange');
    const customDateRange = document.getElementById('customDateRange');
    const startExportBtn = document.getElementById('startExportBtn');
    
    // Show/hide custom date range
    dateRangeSelect.addEventListener('change', function() {
        if (this.value === 'custom') {
            customDateRange.classList.remove('d-none');
        } else {
            customDateRange.classList.add('d-none');
        }
    });
    
    // Start export
    startExportBtn.addEventListener('click', function() {
        const selectedData = [];
        const checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
        
        checkboxes.forEach(checkbox => {
            if (checkbox.id.startsWith('export') && checkbox.id !== 'emailExport') {
                selectedData.push(checkbox.id);
            }
        });
        
        if (selectedData.length === 0) {
            alert('Please select at least one data type to export.');
            return;
        }
        
        // Show loading state
        this.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Preparing Export...';
        this.disabled = true;
        
        // Simulate export process
        setTimeout(() => {
            // Reset button
            this.innerHTML = '<i class="bi bi-download me-1"></i>Start Export';
            this.disabled = false;
            
            // Show success message
            const alert = document.createElement('div');
            alert.className = 'alert alert-success';
            alert.innerHTML = '<i class="bi bi-check-circle me-2"></i>Export started! You\'ll receive an email when it\'s ready for download.';
            document.querySelector('.modal-body').prepend(alert);
            
            // Close modal after delay
            setTimeout(() => {
                const modal = bootstrap.Modal.getInstance(document.getElementById('exportDataModal'));
                modal.hide();
            }, 2000);
        }, 3000);
    });
});
</script>
