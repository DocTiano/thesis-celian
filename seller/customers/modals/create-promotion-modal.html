<!-- Create Promotion Modal -->
<div class="modal fade" id="createPromotionModal" tabindex="-1" aria-labelledby="createPromotionModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createPromotionModalLabel">
                    <i class="bi bi-percent text-success me-2"></i>
                    Create Promotion
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="mb-3">Promotion Details</h6>
                        <div class="mb-3">
                            <label class="form-label">Promotion Name</label>
                            <input type="text" class="form-control" id="promotionName" placeholder="e.g., Summer Sale 2024">
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Promotion Type</label>
                            <select class="form-select" id="promotionType">
                                <option value="">Select Type</option>
                                <option value="discount">Discount</option>
                                <option value="buy-one-get-one">Buy One Get One</option>
                                <option value="free-shipping">Free Shipping</option>
                                <option value="bundle">Bundle Deal</option>
                                <option value="quantity-discount">Quantity Discount</option>
                                <option value="flash-sale">Flash Sale</option>
                            </select>
                        </div>
                        
                        <div id="discountSettings" style="display: none;">
                            <div class="row mb-3">
                                <div class="col-6">
                                    <label class="form-label">Discount Type</label>
                                    <select class="form-select" id="discountType">
                                        <option value="percentage">Percentage (%)</option>
                                        <option value="fixed">Fixed Amount (₱)</option>
                                    </select>
                                </div>
                                <div class="col-6">
                                    <label class="form-label">Discount Value</label>
                                    <input type="number" class="form-control" id="discountValue" min="0" step="0.01">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-6">
                                <label class="form-label">Start Date</label>
                                <input type="datetime-local" class="form-control" id="startDate">
                            </div>
                            <div class="col-6">
                                <label class="form-label">End Date</label>
                                <input type="datetime-local" class="form-control" id="endDate">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" id="promotionDescription" rows="3" placeholder="Describe your promotion..."></textarea>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="mb-3">Target Customers</h6>
                        <div class="mb-3">
                            <label class="form-label">Customer Eligibility</label>
                            <select class="form-select" id="customerEligibility">
                                <option value="all">All Customers</option>
                                <option value="new">New Customers Only</option>
                                <option value="existing">Existing Customers</option>
                                <option value="vip">VIP Customers</option>
                                <option value="segment">Specific Segment</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Applicable Products</label>
                            <select class="form-select" id="applicableProducts" multiple>
                                <option value="all">All Products</option>
                                <option value="category-fresh">Fresh Fish Category</option>
                                <option value="category-dried">Dried Fish Category</option>
                                <option value="specific">Specific Products</option>
                            </select>
                            <div class="form-text">Hold Ctrl to select multiple options</div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Usage Limits</label>
                            <div class="row">
                                <div class="col-6">
                                    <input type="number" class="form-control" id="totalUsageLimit" placeholder="Total uses" min="1">
                                    <div class="form-text">Total times promotion can be used</div>
                                </div>
                                <div class="col-6">
                                    <input type="number" class="form-control" id="perCustomerLimit" placeholder="Per customer" min="1">
                                    <div class="form-text">Uses per customer</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Minimum Requirements</label>
                            <div class="row">
                                <div class="col-6">
                                    <input type="number" class="form-control" id="minOrderAmount" placeholder="Min order (₱)" min="0" step="0.01">
                                    <div class="form-text">Minimum order amount</div>
                                </div>
                                <div class="col-6">
                                    <input type="number" class="form-control" id="minQuantity" placeholder="Min quantity" min="1">
                                    <div class="form-text">Minimum item quantity</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="autoApply">
                            <label class="form-check-label" for="autoApply">
                                Auto-apply promotion (no code required)
                            </label>
                        </div>
                        
                        <div id="promoCodeSection">
                            <div class="mb-3">
                                <label class="form-label">Promo Code</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="promoCode" placeholder="SUMMER2024">
                                    <button class="btn btn-outline-secondary" type="button" id="generateCode">
                                        <i class="bi bi-arrow-clockwise"></i>
                                    </button>
                                </div>
                                <div class="form-text">Leave empty for auto-generate</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4">
                    <h6 class="mb-3">Promotion Preview</h6>
                    <div class="card bg-gradient" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <div class="card-body text-white">
                            <div class="row align-items-center">
                                <div class="col-8">
                                    <h5 id="previewTitle">Your Promotion Name</h5>
                                    <p id="previewDescription" class="mb-2">Promotion description will appear here</p>
                                    <small id="previewDates">Valid from [Start Date] to [End Date]</small>
                                </div>
                                <div class="col-4 text-end">
                                    <div class="display-6 fw-bold" id="previewDiscount">--%</div>
                                    <small>OFF</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-outline-primary">Save as Draft</button>
                <button type="button" class="btn btn-success">Create Promotion</button>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const promotionType = document.getElementById('promotionType');
    const discountSettings = document.getElementById('discountSettings');
    const autoApply = document.getElementById('autoApply');
    const promoCodeSection = document.getElementById('promoCodeSection');
    
    if (promotionType) {
        promotionType.addEventListener('change', function() {
            if (this.value === 'discount' || this.value === 'quantity-discount') {
                discountSettings.style.display = 'block';
            } else {
                discountSettings.style.display = 'none';
            }
        });
    }
    
    if (autoApply) {
        autoApply.addEventListener('change', function() {
            if (this.checked) {
                promoCodeSection.style.display = 'none';
            } else {
                promoCodeSection.style.display = 'block';
            }
        });
    }
    
    // Generate random promo code
    const generateCode = document.getElementById('generateCode');
    if (generateCode) {
        generateCode.addEventListener('click', function() {
            const code = 'PROMO' + Math.random().toString(36).substr(2, 6).toUpperCase();
            document.getElementById('promoCode').value = code;
        });
    }
});
</script>
