<!-- Archive Message Modal -->
<div class="modal fade" id="archiveMessageModal" tabindex="-1" aria-labelledby="archiveMessageModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="archiveMessageModalLabel">
                    <i class="bi bi-archive"></i>
                    Archive Message
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-info d-flex align-items-center" role="alert">
                    <i class="bi bi-info-circle me-2"></i>
                    <div>
                        Archiving this message will move it to the archived folder. You can restore it later if needed.
                    </div>
                </div>

                <form id="archiveMessageForm">
                    <input type="hidden" id="archiveMessageId">
                    
                    <div class="mb-3">
                        <label for="archiveMessageFrom" class="form-label">From</label>
                        <input type="text" class="form-control" id="archiveMessageFrom" readonly>
                    </div>

                    <div class="mb-3">
                        <label for="archiveMessageSubject" class="form-label">Subject</label>
                        <input type="text" class="form-control" id="archiveMessageSubject" readonly>
                    </div>

                    <div class="mb-3">
                        <label for="archiveMessageDate" class="form-label">Date</label>
                        <input type="text" class="form-control" id="archiveMessageDate" readonly>
                    </div>

                    <div class="mb-3">
                        <label for="archiveReason" class="form-label">Reason for Archiving</label>
                        <select class="form-select" id="archiveReason">
                            <option value="">Select reason...</option>
                            <option value="resolved">Issue Resolved</option>
                            <option value="no_response_needed">No Response Needed</option>
                            <option value="duplicate">Duplicate Message</option>
                            <option value="spam">Spam/Unwanted</option>
                            <option value="outdated">Outdated Information</option>
                            <option value="completed">Request Completed</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="archiveNotes" class="form-label">Archive Notes</label>
                        <textarea class="form-control" id="archiveNotes" rows="3" placeholder="Add any notes about why this message is being archived..."></textarea>
                    </div>

                    <div class="mb-3">
                        <label for="archiveCategory" class="form-label">Archive Category</label>
                        <select class="form-select" id="archiveCategory">
                            <option value="">Select category...</option>
                            <option value="customer_support">Customer Support</option>
                            <option value="order_inquiries">Order Inquiries</option>
                            <option value="product_questions">Product Questions</option>
                            <option value="technical_issues">Technical Issues</option>
                            <option value="account_issues">Account Issues</option>
                            <option value="general_feedback">General Feedback</option>
                            <option value="complaints">Complaints</option>
                            <option value="suggestions">Suggestions</option>
                        </select>
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="createFollowUpReminder">
                        <label class="form-check-label" for="createFollowUpReminder">
                            Create follow-up reminder
                        </label>
                    </div>

                    <div class="mb-3" id="followUpDiv" style="display: none;">
                        <label for="followUpDate" class="form-label">Follow-up Date</label>
                        <input type="date" class="form-control" id="followUpDate">
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="notifySender">
                        <label class="form-check-label" for="notifySender">
                            Notify sender that message has been archived
                        </label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="exportBeforeArchive">
                        <label class="form-check-label" for="exportBeforeArchive">
                            Export message data before archiving
                        </label>
                    </div>
                </form>

                <!-- Message Preview -->
                <div class="mt-3 p-3 bg-light rounded">
                    <h6 class="mb-2">Message Preview:</h6>
                    <div class="border-start border-secondary ps-3">
                        <p id="archiveMessagePreview" class="mb-0 text-muted">Message content will appear here...</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-outline-primary" onclick="exportMessage()">
                    <i class="bi bi-download"></i>
                    Export First
                </button>
                <button type="submit" form="archiveMessageForm" class="btn btn-warning">
                    <i class="bi bi-archive"></i>
                    Archive Message
                </button>
            </div>
        </div>
    </div>
</div>

<script>
document.getElementById('createFollowUpReminder').addEventListener('change', function() {
    const followUpDiv = document.getElementById('followUpDiv');
    if (this.checked) {
        followUpDiv.style.display = 'block';
    } else {
        followUpDiv.style.display = 'none';
    }
});
</script>
