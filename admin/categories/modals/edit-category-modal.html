<!-- Edit Category Modal -->
<div class="modal fade" id="editCategoryModal" tabindex="-1" aria-labelledby="editCategoryModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editCategoryModalLabel">
                    <i class="bi bi-pencil-square"></i>
                    Edit Category
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editCategoryForm">
                    <input type="hidden" id="editCategoryId">
                    
                    <div class="mb-3">
                        <label for="editCategoryName" class="form-label">Category Name *</label>
                        <input type="text" class="form-control" id="editCategoryName" required>
                    </div>

                    <div class="mb-3">
                        <label for="editCategoryDescription" class="form-label">Description</label>
                        <textarea class="form-control" id="editCategoryDescription" rows="3"></textarea>
                    </div>

                    <div class="mb-3">
                        <label for="editParentCategory" class="form-label">Parent Category</label>
                        <select class="form-select" id="editParentCategory">
                            <option value="">None (Main Category)</option>
                            <option value="aquaculture">Aquaculture</option>
                            <option value="agriculture">Agriculture</option>
                            <option value="handicrafts">Handicrafts</option>
                            <option value="food_processing">Food Processing</option>
                            <option value="textiles">Textiles</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="editCategoryIcon" class="form-label">Category Icon</label>
                        <select class="form-select" id="editCategoryIcon">
                            <option value="">Select an icon...</option>
                            <option value="bi-fish">üêü Fish (bi-fish)</option>
                            <option value="bi-tree">üå≥ Agriculture (bi-tree)</option>
                            <option value="bi-scissors">‚úÇÔ∏è Handicrafts (bi-scissors)</option>
                            <option value="bi-cup-hot">‚òï Food & Beverage (bi-cup-hot)</option>
                            <option value="bi-thread">üßµ Textiles (bi-thread)</option>
                            <option value="bi-hammer">üî® Tools (bi-hammer)</option>
                            <option value="bi-gift">üéÅ Gifts (bi-gift)</option>
                            <option value="bi-bag">üëú Bags (bi-bag)</option>
                            <option value="bi-house">üè† Home & Garden (bi-house)</option>
                            <option value="bi-palette">üé® Arts & Crafts (bi-palette)</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="editCategoryImage" class="form-label">Update Category Image</label>
                        <input type="file" class="form-control" id="editCategoryImage" accept="image/*">
                        <div class="form-text">Upload a new image (leave empty to keep current image)</div>
                        
                        <!-- Current Image Preview -->
                        <div id="currentImagePreview" class="mt-2">
                            <img id="currentImage" src="" alt="Current category image" class="img-thumbnail" style="max-width: 150px; display: none;">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="editSortOrder" class="form-label">Sort Order</label>
                                <input type="number" class="form-control" id="editSortOrder" min="0">
                                <div class="form-text">Lower numbers appear first</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="editCategoryColor" class="form-label">Category Color</label>
                                <input type="color" class="form-control form-control-color" id="editCategoryColor">
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="editCategoryTags" class="form-label">Tags (Keywords)</label>
                        <input type="text" class="form-control" id="editCategoryTags" placeholder="Enter tags separated by commas">
                        <div class="form-text">Help users find this category</div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Category Settings</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="editIsActive">
                            <label class="form-check-label" for="editIsActive">
                                Active (visible to users)
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="editAllowProducts">
                            <label class="form-check-label" for="editAllowProducts">
                                Allow products in this category
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="editRequireVerification">
                            <label class="form-check-label" for="editRequireVerification">
                                Require verification for products
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="editFeaturedCategory">
                            <label class="form-check-label" for="editFeaturedCategory">
                                Featured category (show on homepage)
                            </label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="editSeoTitle" class="form-label">SEO Title</label>
                        <input type="text" class="form-control" id="editSeoTitle">
                    </div>

                    <div class="mb-3">
                        <label for="editSeoDescription" class="form-label">SEO Description</label>
                        <textarea class="form-control" id="editSeoDescription" rows="2"></textarea>
                    </div>

                    <!-- Category Statistics -->
                    <div class="mt-4 p-3 bg-light rounded">
                        <h6 class="mb-2">Category Statistics:</h6>
                        <div class="row">
                            <div class="col-md-4">
                                <small class="text-muted">Products:</small>
                                <div id="categoryProductCount">-</div>
                            </div>
                            <div class="col-md-4">
                                <small class="text-muted">Producers:</small>
                                <div id="categoryProducerCount">-</div>
                            </div>
                            <div class="col-md-4">
                                <small class="text-muted">Orders:</small>
                                <div id="categoryOrderCount">-</div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-outline-danger" onclick="deleteCategory()">
                    <i class="bi bi-trash"></i>
                    Delete Category
                </button>
                <button type="submit" form="editCategoryForm" class="btn btn-primary">
                    <i class="bi bi-check-lg"></i>
                    Update Category
                </button>
            </div>
        </div>
    </div>
</div>
